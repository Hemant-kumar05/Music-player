<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŽµ Music Player Test & Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .subtitle {
            text-align: center;
            opacity: 0.8;
            margin-bottom: 40px;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .test-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .test-card h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .btn {
            background: linear-gradient(45deg, #1db954, #1ed760);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(29, 185, 84, 0.4);
        }
        .btn:active {
            transform: translateY(0);
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
        }
        .success { background: rgba(29, 185, 84, 0.3); border-left: 4px solid #1db954; }
        .error { background: rgba(220, 53, 69, 0.3); border-left: 4px solid #dc3545; }
        .warning { background: rgba(255, 193, 7, 0.3); border-left: 4px solid #ffc107; }
        .info { background: rgba(13, 202, 240, 0.3); border-left: 4px solid #0dcaf0; }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        .feature {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .feature i {
            font-size: 2em;
            margin-bottom: 10px;
            color: #1db954;
        }
        
        iframe {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        .demo-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1>ðŸŽµ Spotify-Style Music Player</h1>
        <p class="subtitle">Complete music streaming experience with all modern features</p>
        
        <div class="test-grid">
            <div class="test-card">
                <h3><i class="fas fa-cog"></i> System Status</h3>
                <div id="system-status"></div>
                <button class="btn" onclick="runSystemTests()">Run System Check</button>
            </div>
            
            <div class="test-card">
                <h3><i class="fas fa-play"></i> Audio Test</h3>
                <div id="audio-status"></div>
                <button class="btn" onclick="testAudioPlayback()">Test Audio</button>
            </div>
            
            <div class="test-card">
                <h3><i class="fas fa-upload"></i> File Upload</h3>
                <input type="file" id="test-upload" accept="audio/*" multiple style="margin: 10px 0;">
                <button class="btn" onclick="testFileUpload()">Test Upload</button>
                <div id="upload-status"></div>
            </div>
            
            <div class="test-card">
                <h3><i class="fas fa-palette"></i> Theme System</h3>
                <div id="theme-status"></div>
                <button class="btn" onclick="testThemes()">Test Themes</button>
            </div>
        </div>
        
        <div class="demo-section">
            <h2><i class="fas fa-star"></i> Features Included</h2>
            <div class="features-grid">
                <div class="feature">
                    <i class="fas fa-music"></i>
                    <h4>Music Playback</h4>
                    <p>Play, pause, skip with full controls</p>
                </div>
                <div class="feature">
                    <i class="fas fa-upload"></i>
                    <h4>File Upload</h4>
                    <p>Upload your own music files</p>
                </div>
                <div class="feature">
                    <i class="fas fa-list"></i>
                    <h4>Playlists</h4>
                    <p>Create and manage custom playlists</p>
                </div>
                <div class="feature">
                    <i class="fas fa-search"></i>
                    <h4>Search & Filter</h4>
                    <p>Find music by genre, artist, title</p>
                </div>
                <div class="feature">
                    <i class="fas fa-moon"></i>
                    <h4>Dark/Light Theme</h4>
                    <p>Toggle between themes</p>
                </div>
                <div class="feature">
                    <i class="fas fa-sliders-h"></i>
                    <h4>Equalizer</h4>
                    <p>5-band EQ with presets</p>
                </div>
                <div class="feature">
                    <i class="fas fa-heart"></i>
                    <h4>Favorites</h4>
                    <p>Like and save favorite tracks</p>
                </div>
                <div class="feature">
                    <i class="fas fa-save"></i>
                    <h4>Data Persistence</h4>
                    <p>Saves preferences automatically</p>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn" onclick="openMusicPlayer()" style="font-size: 1.2em; padding: 15px 30px;">
                <i class="fas fa-play"></i> Launch Music Player
            </button>
        </div>
        
        <div class="demo-section">
            <h2><i class="fas fa-desktop"></i> Live Demo</h2>
            <iframe src="/" id="player-frame"></iframe>
        </div>
    </div>

    <script>
        function addStatus(containerId, message, type = 'success') {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = message;
            container.appendChild(div);
        }

        function clearStatus(containerId) {
            document.getElementById(containerId).innerHTML = '';
        }

        function runSystemTests() {
            clearStatus('system-status');
            addStatus('system-status', '<i class="fas fa-spinner fa-spin"></i> Running tests...', 'info');
            
            Promise.all([
                fetch('/').then(r => r.ok),
                fetch('/src/styles/main.css').then(r => r.ok),
                fetch('/src/scripts/main.js').then(r => r.ok)
            ]).then(results => {
                clearStatus('system-status');
                if (results.every(r => r)) {
                    addStatus('system-status', '<i class="fas fa-check"></i> All files loaded successfully!', 'success');
                    addStatus('system-status', '<i class="fas fa-server"></i> HTTP server running on port 8000', 'success');
                    addStatus('system-status', '<i class="fas fa-code"></i> JavaScript and CSS loaded', 'success');
                } else {
                    addStatus('system-status', '<i class="fas fa-exclamation-triangle"></i> Some files missing', 'error');
                }
            }).catch(err => {
                clearStatus('system-status');
                addStatus('system-status', '<i class="fas fa-times"></i> Connection error: ' + err.message, 'error');
            });
        }

        function testAudioPlayback() {
            clearStatus('audio-status');
            addStatus('audio-status', '<i class="fas fa-volume-up"></i> Testing audio capabilities...', 'info');
            
            // Test Web Audio API
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                addStatus('audio-status', '<i class="fas fa-check"></i> Web Audio API supported', 'success');
                
                // Test basic audio element
                const audio = new Audio();
                audio.addEventListener('canplaythrough', () => {
                    addStatus('audio-status', '<i class="fas fa-check"></i> Audio element working', 'success');
                });
                
                // Test with a simple data URL
                audio.src = 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhCSCWuO/PfCkGM2+t5tBQGhWE2/fNeSoGMG2u5tNXGBN/0/DGfCQGMnl+w/o=';
                
                setTimeout(() => {
                    addStatus('audio-status', '<i class="fas fa-info-circle"></i> Click tracks in the player to test playback', 'info');
                }, 1000);
                
            } catch (error) {
                addStatus('audio-status', '<i class="fas fa-exclamation-triangle"></i> Web Audio API not supported', 'warning');
            }
        }

        function testFileUpload() {
            clearStatus('upload-status');
            const fileInput = document.getElementById('test-upload');
            
            if (fileInput.files.length === 0) {
                addStatus('upload-status', '<i class="fas fa-info-circle"></i> Please select audio files first', 'warning');
                return;
            }
            
            addStatus('upload-status', `<i class="fas fa-file-audio"></i> Testing ${fileInput.files.length} files...`, 'info');
            
            for (let file of fileInput.files) {
                if (file.type.startsWith('audio/')) {
                    addStatus('upload-status', `<i class="fas fa-check"></i> ${file.name} - Valid (${(file.size/1024/1024).toFixed(1)}MB)`, 'success');
                } else {
                    addStatus('upload-status', `<i class="fas fa-times"></i> ${file.name} - Invalid type`, 'error');
                }
            }
            
            addStatus('upload-status', '<i class="fas fa-upload"></i> Use the upload button in the music player to add these files', 'info');
        }

        function testThemes() {
            clearStatus('theme-status');
            addStatus('theme-status', '<i class="fas fa-palette"></i> Testing theme system...', 'info');
            
            const iframe = document.getElementById('player-frame');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            if (iframeDoc) {
                const body = iframeDoc.body;
                const currentTheme = body.classList.contains('light-theme') ? 'light' : 'dark';
                addStatus('theme-status', `<i class="fas fa-check"></i> Current theme: ${currentTheme}`, 'success');
                
                // Toggle theme
                body.classList.toggle('light-theme');
                const newTheme = body.classList.contains('light-theme') ? 'light' : 'dark';
                addStatus('theme-status', `<i class="fas fa-check"></i> Switched to: ${newTheme}`, 'success');
                
                // Toggle back after 2 seconds
                setTimeout(() => {
                    body.classList.toggle('light-theme');
                    addStatus('theme-status', '<i class="fas fa-check"></i> Theme toggle test completed', 'success');
                }, 2000);
            } else {
                addStatus('theme-status', '<i class="fas fa-info-circle"></i> Use the theme button in the music player', 'info');
            }
        }

        function openMusicPlayer() {
            window.open('/', 'musicplayer', 'width=1400,height=900,scrollbars=yes');
        }

        // Auto-run system tests on load
        window.addEventListener('load', () => {
            setTimeout(runSystemTests, 1000);
        });
    </script>
</body>
</html>